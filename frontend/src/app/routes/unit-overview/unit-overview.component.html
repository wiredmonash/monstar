<!-- ! Toast for on deletion of review -->
<p-toast></p-toast>

<!-- ! CHILD: UnitHeaderComponent -->
@if (unit) {
    <!-- Unit review header -->
    <app-unit-review-header 
        [unit]="unit" 
        (sortBy)="sortReviews($event)" 
        (reviewAdded)="refreshReviews()"
    />
} @else {
    <!-- Show unit review header skeleton if there is no unit yet -->
    <div class="header-skeleton-container">
        <p-skeleton 
            #headerSkeleton
            class="header-skeleton" 
            [height]="skeletonHeight"
            borderRadius="16px"
        />
    </div>
}

<!-- ! Show all the reviews  -->
@if (!reviewsLoading) {
    <!-- Review cards -->
    <div class="reviews-container">
        @for (review of reviews; track $index) {
            <app-review-card 
                [review]="review" 
                (reviewDeleted)="refreshReviews('delete')"
            />
        }
    </div>
} @else {
    <!-- Show review card skeletons if reviews are still loading -->
    <div class="reviews-skeleton-container mt-5">
        @if (!unit) {
            @for (i of [1,2,3]; track $index) {
                <p-skeleton 
                    width="1057.52px" 
                    height="204.4px" 
                    borderRadius="20px"
                    [style]="{ 'margin-top': '20px', 'margin-bottom': '20px' }"
                />
            }
        } @else {
            @for (i of [].constructor(unit.reviews.length); track $index) {
                <p-skeleton 
                    width="1057.52px" 
                    height="204.4px" 
                    borderRadius="20px"
                    [style]="{ 'margin-top': '20px', 'margin-bottom': '20px' }"
                />
            }
        }
    </div>
}

<!-- ! Show end of reviews message  -->
@if (reviews.length > 0) {
    <h3 
        class="text-center mb-5 prevent-select"
        [style]="{ 'color': 'var(--text-color)' }"
    >You have reached the end...</h3>
} 
<!-- ! Show no reviews message if there are no reviews -->
@else {
    <h3 
        class="text-center prevent-select"
        [style]="{ 'color': 'var(--text-color)', 'margin-top': '5rem', 'margin-bottom': '5rem' }"
    >No reviews for this unit...</h3>
}
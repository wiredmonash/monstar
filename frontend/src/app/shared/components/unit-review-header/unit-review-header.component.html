<div class="unit-overview">
  <div class="row align-items-center">
    <!-- Unit Info -->
    <div class="col-md-3 unit-title-container">
      <!-- Unit Code -->
      <h1 class="fw-bold unit-title">{{ unit.unitCode | uppercase }}</h1>
      <!-- Unit Name -->
      <p class="unit-subtitle">{{ unit.name }}</p>
    </div>

    <!-- Vertical Divider -->
    <div class="col-md-1 p-0">
      <div class="vr"></div>
    </div>

    <!-- Overall Rating -->
    <div class="col-md-2 overall-rating-container text-center">
      <h2 class="fw-bold overall-rating-title">{{ unit.avgOverallRating }} <span class="fs-5">out of 5</span></h2>
      <div class="stars">
        @for (star of [1,2,3,4,5]; track $index) {
          <i class="bi text-dark" 
              [class.bi-star-fill]="star <= unit.avgOverallRating"
              [class.bi-star]="star > unit.avgOverallRating"
          ></i>
        }
      </div>
      <p>{{ unit.reviews.length }} reviews</p>
    </div>

    <!-- Ratings: Content, Relevancy, and Teaching Team -->
    <div class="col-md-4 d-flex p-0 ratings-section">
      <div class="d-flex flex-column me-3">
        <!-- Content Section -->
        <div class="text-left smaller-section content-rating">
          <div class="label-with-rating">
            <p>Content</p>
            <p class="rating-number">{{ unit.avgContentRating }}</p>
          </div>
          <div class="stars smaller-stars">
            @for (star of [1,2,3,4,5]; track $index) {
              <i class="bi" 
                  [class.bi-star-fill]="star <= unit.avgContentRating"
                  [class.bi-star]="star > unit.avgContentRating"
              ></i>
            }
          </div>
        </div>

        <!-- Teaching Team Section -->
        <div class="text-left smaller-section teaching-team-rating mt-2">
          <div class="label-with-rating">
            <p>Teaching Team</p>
            <p class="rating-number">{{ unit.avgFacultyRating }}</p>
          </div>
          <div class="stars smaller-stars">
            @for (star of [1,2,3,4,5]; track $index) {
              <i class="bi text-dark" 
                  [class.bi-star-fill]="star <= unit.avgFacultyRating"
                  [class.bi-star]="star > unit.avgFacultyRating"
              ></i>
            }
          </div>
        </div>
      </div>

      <!-- Relevancy Section -->
      <div class="text-left smaller-section relevancy-rating">
        <div class="label-with-rating">
          <p>Relevancy</p>
          <p class="rating-number">{{ unit.avgRelevancyRating }}</p>
        </div>
        <div class="stars smaller-stars">
          @for (star of [1,2,3,4,5]; track $index) {
            <i class="bi text-dark" 
                [class.bi-star-fill]="star <= unit.avgRelevancyRating"
                [class.bi-star]="star > unit.avgRelevancyRating"
            ></i>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Sort By and Filter Section -->
  <div class="row mt-3 d-flex justify-content-end">
    <!-- Write a Review Button -->
    <div class="col-auto">
      <button class="btn btn-outline-white filter-btn">
        <i class="bi bi-pencil"></i> Write a review
      </button>
    </div>

    <!-- Sort By Dropdown -->
    <div class="col-auto">
      <div class="dropdown">
        <button class="btn btn-outline-dark sort-by-btn dropdown-toggle mb-3" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          Sort by
        </button>
        <ul class="dropdown-menu" aria-labelledby="sortDropdown">
          <li><a class="dropdown-item" href="#">Recent</a></li>
          <li><a class="dropdown-item" href="#">Rating</a></li>
        </ul>
      </div>
    </div>

    <!-- Filter Button -->
    <div class="col-auto">
      <button class="btn btn-outline-dark filter-btn">
        <i class="bi bi-sliders"></i> Filter
      </button>
    </div>
  </div>
</div>
